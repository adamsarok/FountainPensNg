<div class="root-div">
  <div class="image-container">
    @if (paper.imageUrl) {
      <img alt="image of a paper" src="{{ paper.imageUrl }}" />
    } @else {
      <mat-icon style="width: 100%; height: 100%; opacity: 0.25" svgIcon="pen-nib"
        >menu</mat-icon
        >
      }
    </div>
    <app-image-uploader
      (selectedFile)="onFileSelected($event)"
    ></app-image-uploader>
    <form style="margin-top: 16px" [formGroup]="form" (ngSubmit)="onSubmit()">
      <div fxLayout="column" fxLayoutAlign="center center">
        <div fxFlex="100%">
          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Maker</mat-label>
            <input matInput formControlName="maker" name="maker" />
            @if (form.get('maker')?.hasError('required')) {
              <mat-error
                >This field is required</mat-error
                >
              }
            </mat-form-field>
          </div>

          <div fxFlex="100%">
            <mat-form-field appearance="outline" class="form-field">
              <mat-label>Name</mat-label>
              <input matInput formControlName="paperName" name="paperName" />
              @if (form.get('paperName')?.hasError('required')) {
                <mat-error
                  >This field is required</mat-error
                  >
                }
              </mat-form-field>
            </div>

            <div fxFlex="100%">
              <mat-form-field appearance="outline" class="form-field">
                <mat-label>Comment</mat-label>
                <input matInput formControlName="comment" name="comment" />
                @if (form.get('comment')?.hasError('required')) {
                  <mat-error
                    >This field is required</mat-error
                    >
                  }
                </mat-form-field>
              </div>

              <div fxFlex="100%">
                <mat-form-field appearance="outline" class="form-field">
                  <mat-label>Rating</mat-label>
                  <input matInput formControlName="rating" name="rating" />
                  @if (form.get('rating')?.hasError('required')) {
                    <mat-error
                      >This field is required</mat-error
                      >
                    }
                  </mat-form-field>
                </div>

                <div fxFlex="100%">
                  @if (validationErrors) {
                    <div class="row">
                      <ul class="text-danger">
                        @for (error of validationErrors; track error) {
                          <li>
                            {{ error }}
                          </li>
                        }
                      </ul>
                    </div>
                  }
                  <div class="btn-container">
                    <button mat-flat-button color="primary" type="submit">
                      {{ paper.id ? "Update" : "Create" }}
                    </button>
                    @if (paper.id) {
                      <button
                        mat-flat-button
                        color="warn"
                        type="button"
                        (click)="deletePaper()"
                        >
                        Delete
                      </button>
                    }
                  </div>
                </div>
              </div>
            </form>
          </div>
