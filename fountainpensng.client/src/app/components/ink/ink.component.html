<div class="root-div">
  <div class="image-container">
    @if (ink.imageUrl) {
    <img alt="image of an ink swatch" [src]="ink.imageUrl" />
    } @else {
    <mat-icon style="width: 100%; height: 100%; opacity: 0.25" svgIcon="pen-nib"
      >menu</mat-icon
    >
    }
  </div>
  <app-image-uploader
    (selectedFile)="onFileSelected($event)"
  ></app-image-uploader>
  <form style="margin-top: 16px" [formGroup]="form" (ngSubmit)="onSubmit()">
    <div fxLayout="column" fxLayoutAlign="center center">
      <div fxFlex="100%">
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Maker</mat-label>
          <input matInput formControlName="maker" name="maker" />
          <mat-error *ngIf="form.get('maker')?.hasError('required')"
            >This field is required</mat-error
          >
        </mat-form-field>
      </div>

      <div fxFlex="100%">
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Name</mat-label>
          <input matInput formControlName="inkName" name="inkName" />
          <mat-error *ngIf="form.get('inkName')?.hasError('required')"
            >This field is required</mat-error
          >
        </mat-form-field>
      </div>

      <div fxFlex="100%">
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Comment</mat-label>
          <input matInput formControlName="comment" name="comment" />
          <mat-error *ngIf="form.get('comment')?.hasError('required')"
            >This field is required</mat-error
          >
        </mat-form-field>
      </div>

      <div fxFlex="100%">
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Color</mat-label>
          <input type="color" matInput formControlName="color" name="color" />
          <mat-error *ngIf="form.get('color')?.hasError('required')"
            >This field is required</mat-error
          >
        </mat-form-field>
      </div>

      <div fxFlex="100%">
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Rating</mat-label>
          <input matInput formControlName="rating" name="rating" />
          <mat-error *ngIf="form.get('rating')?.hasError('required')"
            >This field is required</mat-error
          >
        </mat-form-field>
      </div>

      <div fxFlex="100%">
        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Milliliters</mat-label>
          <input matInput formControlName="ml" name="ml" />
          <mat-error *ngIf="form.get('ml')?.hasError('ml')"
            >This field is required</mat-error
          >
        </mat-form-field>
      </div>

      <div fxFlex="100%">
        <div class="row" *ngIf="validationErrors">
          <ul class="text-danger">
            @for (error of validationErrors; track error) {
            <li>
              {{ error }}
            </li>
            }
          </ul>
        </div>
        <div class="btn-container">
          <button mat-flat-button color="primary" type="submit">
            {{ ink.id ? "Update" : "Create" }}
          </button>
          <button
            *ngIf="ink.id"
            mat-flat-button
            color="warn"
            type="button"
            (click)="deleteInk()"
          >
            Delete
          </button>
        </div>
      </div>
    </div>
  </form>
   <table mat-table [dataSource]="inkedUps">
    <ng-container matColumnDef="inkedAt">
      <th mat-header-cell *matHeaderCellDef>Inked At</th>
      <td mat-cell *matCellDef="let element">{{ element.inkedAt }}</td>
    </ng-container>
    <ng-container matColumnDef="matchRating">
      <th mat-header-cell *matHeaderCellDef>Match Rating</th>
      <td mat-cell *matCellDef="let element">{{ element.matchRating }}</td>
    </ng-container>
    <ng-container matColumnDef="pen">
      <th mat-header-cell *matHeaderCellDef>Pen</th>
      <td mat-cell *matCellDef="let element">
        {{ element.penMaker }} {{ element.penName }}
        <input type="color" value="{{ element.penColor }}" disabled />
      </td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="inkedUpDisplayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: inkedUpDisplayedColumns"></tr>
  </table>
</div>
